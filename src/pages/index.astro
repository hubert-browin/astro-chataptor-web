---
// Redirect from / to detected language
// This runs on the server during build, but actual redirect happens via Nginx
// This is a fallback for development

const acceptLanguage = Astro.request.headers.get('accept-language') || 'en';
const preferredLang = acceptLanguage.split(',')[0].split('-')[0];

const supportedLocales = ['pl', 'en', 'de', 'fr', 'es', 'it', 'cs', 'sk'];
const redirectLang = supportedLocales.includes(preferredLang) ? preferredLang : 'en';

return Astro.redirect(`/${redirectLang}/`, 302);
---
